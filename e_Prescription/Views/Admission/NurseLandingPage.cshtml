@model NurseLandingPageViewModel

@{
    ViewBag.Title = "Nurse Dashboard";
}

<style>
    .card {
        background-color: lightgray;
        color: #000;
    }

    .container {
        border: 5px solid #f5f5f5;
        padding: 10px;
        overflow: hidden;
        background-color: #f5f5f5;
    }

    .card-header {
        border-radius: 0;
    }

    .modal-content {
        border-radius: 0;
    }

    .card-title i {
        font-size: 3rem;
        margin-right: 10px;
    }
</style>

<div class="container">
    <div class="row">
        <div class="col-12 text-center card-header bg-success" style="height: 45px;">
            <h4>Welcome, Nurse @Model.NurseName</h4>
        </div>
        <div class="d-flex justify-content-center">
            <p class="lead">Manage your patients efficiently and effectively</p>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-hospital-user fa-3x"></i>
                        Admit Patients
                    </h5>
                    <p class="card-text">Number of patients booked and ready for admission: @Model.BookedPatientsCount</p>
                    <a class="btn btn-primary" href="@Url.Action("Index", "Admission")">View booked patients</a>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="fas fa-users fa-3x"></i>
                        View Admitted Patients
                    </h5>
                    <p class="card-text">Number of patients admitted by you: @Model.AdmittedPatientsCount</p>
                    <a href="@Url.Action("NursePatients", "Admission")" class="btn btn-success">View admitted patients</a>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-success text-white">
                    Patient Statistics & Helpful Resources
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-8">
                            <!-- Chart.js integration -->
                            <canvas id="patientStatisticsChart" width="380" height="205"></canvas>
                        </div>
                        <div class="col-md-4">
                            <ul class="list-group">
                                <li class="list-group-item">
                                    <i class="fas fa-book"></i>
                                    <a href="#">Hospital Guidelines</a>
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-ambulance"></i>
                                    <a href="#">Emergency Protocols</a>
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-procedures"></i>
                                    <a href="#">Nursing Procedures</a>
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-comments"></i>
                                    <a href="#">Staff Chats</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var ctx = document.getElementById('patientStatisticsChart').getContext('2d');
            var patientStatisticsChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Active Bookings', 'Admitted', 'Discharged'],
                    datasets: [{
                        label: 'Patient Statistics',
                        data: [@Model.BookedPatientsCount, @Model.AdmittedCount, @Model.DischargedCount],
                        backgroundColor: ['rgba(54, 162, 235, 0.2)', 'rgba(255, 206, 86, 0.2)', 'rgba(75, 192, 192, 0.2)'],
                        borderColor: ['rgba(54, 162, 235, 1)', 'rgba(255, 206, 86, 1)', 'rgba(75, 192, 192, 1)'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        });
    </script>
}
