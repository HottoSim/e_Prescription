@model NurseLandingPageViewModel

@{
    ViewBag.Title = "Nurse Dashboard";
}

<style>
    .card {
        background-color: lightgray;
        color: #000;
    }

    .container {
        border: 5px solid #f5f5f5; /* Whitish color */
        /* border-radius: 15px;  Rounded corners */
        padding: 10px;
        overflow: hidden; /* Ensures content doesn't overflow the rounded corners */
        background-color: #f5f5f5;
    }

    .card-header {
        border-radius: 0; /* Ensures card header has no rounded corners */
    }

    .modal-content {
        border-radius: 0; /* Ensures modal content has no rounded corners */
    }
</style>


<div class="container">
    <div class="row">
        <div class="col-12 text-center card-header bg-success" style="height: 45px;">
            <h4>Welcome, Nurse @Model.NurseName</h4>
        </div>
        <div class="d-flex justify-content-center">
            <p class="lead">Manage your patients efficiently and effectively</p>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">Admit Patients</h5>
                    <p class="card-text">Number of patients booked and ready for admission: @Model.BookedPatientsCount</p>
                    <a class="btn btn-primary" href="@Url.Action("Index", "Admission")">View Booked Patients</a>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card text-center">
                <div class="card-body">
                    <h5 class="card-title">View Admitted Patients</h5>
                    <p class="card-text">Number of patients admitted by you: @Model.AdmittedPatientsCount</p>
                    <a onclick="openAdmissionModal('@Url.Action("NursePatients", "Admission")')" class="btn btn-success">View Admitted Patients</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal 2 -->
    <div class="modal fade" id="AdmissionModal" tabindex="-1" role="dialog" aria-labelledby="AdmissionModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title text-center" id="AdmissionModalLabel">View Admitted</h5>
                    <button type="button" class="close" onclick="window.location.href='@Url.Action("NurseLandingPage", "Admission")'" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="AdmissionModalBody">
                    <!-- Content loaded dynamically -->
                </div>
                <div class="modal-footer d-flex justify-content-end">
                    <button type="button" class="btn btn-danger" onclick="window.location.href='@Url.Action("NurseLandingPage", "Admission")'">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <script>
        function openAdmissionModal(url) {
            $('#AdmissionModalBody').load(url, function () {
                $('#AdmissionModal').modal('show');
            });
        }
    </script>
}
